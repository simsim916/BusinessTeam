package iocDI01_xml;

import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.GenericXmlApplicationContext;

public class TVUser02 {

	public static void main(String[] args) {
		// 1. BeanFactory (스프링 컨테이너)생성
		AbstractApplicationContext sc = new 
				GenericXmlApplicationContext("iocDI01_xml/app02.xml");
		TV tv = (TV)sc.getBean("tvl");
		
		// 2. 필요한 객체를 전달받고 서비스 진행
		if (tv != null) {
			tv.powerOn();
			tv.volumeUp();
			tv.volumeDown();
			tv.powerOff();
		} else {
			System.out.println("TV를 선택하지 않았습니다.");
		}

	    // 3. singleton(싱글톤) Test
	    // => 스프링 프레임웤의 모든 작업은 싱글톤을 기본으로함.
	    // => 싱글톤 (한개의 인스턴스만 허용 하는것) 적용 Test
	    // => 설정화일의 scope 속성 에 "prototype"_ss / "singleton"_lg (default 는 싱글톤)
	    // => 생성자 실행횟수와 아래의 주소값 확인해보기
	    //    SsTVi 2개, LgTVi 2개 씩 인스턴스 작성 후 확인    		
		TV tv2 = (TV)sc.getBean("tvl");
		TV tv3 = (TV)sc.getBean("tvl");
		System.out.println("** singleton(싱글톤) test **");
		System.out.println(" tv => "+tv);
		System.out.println(" tv2 => "+tv2);
		System.out.println(" tv3 => "+tv3);
		sc.close();
	}

}
